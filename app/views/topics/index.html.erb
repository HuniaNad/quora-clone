
<h1>Topics</h1>

<%= link_to 'New Topic', new_topic_path, class: 'btn btn-success' %>

<% @topics.each do |topic| %>
    <div class="container mt-4">
      <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card topic-card">
              <div class="card-header d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column align-items-center mb-3">

                  <% if topic.user&.image&.attached? %>
                    <%= image_tag(topic.user.image, style: 'height: 30px; width: 30px; display: inline-block; border-radius: 50%;') %>
                  <% else %>
                    <span class="material-icons md-24 rounded-circle">
                      account_circle
                    </span>
                  <% end %>
                  <%= link_to topic.user.name, profile_path(topic.user_id) %>
                </div>

                <%= link_to topic do %>
                  <i class="material-icons">visibility</i>
                <% end %>
              </div>
              <% if topic.image&.attached? %>
                <%= image_tag(topic.image, class: 'card-img-top') %>
              <% end %>

              <div class="card-body">
                <h5 class="card-title">
                  <%= link_to topic.title.titlecase, topic %>
                </h5>
                <p class="card-text">
                  <%= truncate(topic.description.capitalize, length: 140) %>
                </p>
              </div>

              <div class="card-footer text-muted">
                <%= render partial: 'following', locals: { topic: topic } %>
              </div>
            </div>
        </div>
      </div>
    </div>  
<% end %>

<br>


