
<h1>Questions</h1>

<%= link_to 'New Question', new_question_path %>

<% @questions.each do |question| %>
    <div class="container mt-4">
      <div class="row">
        <div class="col-md-8 offset-md-2">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">
                  <%= link_to question.title.titlecase, question %>
                </h5>
                <p class="card-text">
                  <%= truncate(question.body.capitalize, length: 140) %>
                </p>
              </div>
              <div class="card-footer text-muted d-flex justify-content-between align-items-center">
                <span>Asked by 
                  <%= link_to question.user.name, profile_path(question.user_id) %>
                </span>

                <div class="d-flex align-items-center">
                  <div class="btn-group question-vote-buttons">

                    <button 
                      id="btn-upvote"
                      class="btn btn-primary btn-sm vote-button" 
                      data-vote="upvote" 
                      data-q-id="<%= question.id %>" 
                      <%= "enabled" if question.upvotes.pluck(:user_id).include? current_user.id %>
                    >
                      <span class="material-icons">thumb_up</span> Upvote &#8226; 
                      <span class="likes-count-<%= question.id %>"> <%= question.upvotes_count %> </span>
                    </button>

                    <button 
                      id="btn-downvote"
                      class="btn btn-danger btn-sm vote-button" 
                      data-vote="downvote" 
                      data-q-id="<%= question.id %>"
                      <%= "enabled" if question.downvotes.pluck(:user_id).include? current_user.id %>
                      
                    >
                      <span class="material-icons">thumb_down</span>
                    </button>
                  </div>
                  <%= link_to question do %>
                    <i class="material-icons">visibility</i>
                  <% end %>
                </div>
                
              </div>
            </div>
        </div>
      </div>
    </div>  
<% end %>

<br>


